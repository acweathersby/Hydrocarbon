@IGNORE g:sp

@IMPORT ./failure_recovery_lib.hcg as flib

<> S > A \r
            f:r { { sym: $1  } }

<[recover A] 

    scan until [ \r ] then reduce 
            f:r { { type:"failed A", pos, sym } }
>



<> A > \a \b \c
            f:r { { type: "good A", a:$1, b:$2, c:$3  } }


#<> ASI > \;
#
#<[ ASI_recovery]
#
#scan until [ $eof \}  ] then set token length 0 then consume
#
#on fail state [ASI_recovery_look_back]
#
#scan back until [ g:nl ] then consume
#
#>
