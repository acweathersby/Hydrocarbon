# Parser Architecture

A parser generated by Hydrocarbon is built around a dedicated stack machine that runs a byte code instruction set specific to whatever grammar 
was used as a compile source. 

An instruction block pointer:
```
  Meta Data                _________Instruction Pointer__________
  31****28                19*************************************0 
 [31..|...|.26|...|...|...|...|...|...|...|...|...|...|...|...|..0]
          27 |________IS_NORMAL_STATE
           |______IS_FAIL_STATE
```

Each state is represented by an instruction block that is comprised of a sequence of one or more 32bit bytecode instructions.

## Data layout
32bit instruction buffer. 
- `[offset 0; byte 0]` Default Pass Instruction 
- `[offset 1; byte 4]` Default Fail Instruction 
- `[offset 2; byte 8]` Default Scope Pop 
- `[offset 3; byte 12]` Default Pass Through Instruction
- `[offset 4; byte 16]` Scanner Instruction Block Pointer
- `[offset 5; byte 20]` Scanner Instruction Block Pointer
- `[offset 6; byte 24]` Token Row Word Size
- `[offset *; byte *]` State Instruction Blocks

## Byte Code Instructions
- prod = "prod",
- increment = "increment",
- token_assign = "token-assign",
- empty_consume = "empty-consume",
- consume = "consume",
- inline_assert = "inline-assert",
- peek = "peek",
- assert = "assert",
- goto = "goto",
- reduce = "reduce",
- set_prod = "set-prod",
- fork_to = "fork-to",
- scan_until = "scan-until",
- scan_back_until = "scan-back-until",
- pop = "pop",
- on_fail = "on-fail",
- token_length = "token-length",
- token_id = "token-id",
- pass = "pass",
- fall_through = "fall_through",
- fail = "fail",
- repeat = "repeat-state",
- left_most = "assert-left",
- set_scope = "set-scope",
- not_in_scopes = "not-in-scopes"

### Input Types

1. PRODUCTION - 0
1. TOKEN - 1
1. CLASS - 2 
1. CODEPOINT - 3
1. BYTE - 4